(function(f){function q(a,b){var c=f.extend({},r,b);return a.each(function(){var d=f(this);d.find("."+c.listClass).find("."+c.itemClass).hide();d.data(n,c).bind(g+s,d,h.show).bind(g+t,d,h.hide).bind(g+o,d,h.select).bind(g+u,d,h.next).bind(g+v,d,h.prev).bind(g+w,d,h.shuffle)})}function x(a){var b=f(this);a=f(a.target);a.hasClass(i)||(a=a.parents("."+i));a=a.index();b.parents("."+k).radmenu(a)}function j(a){var b=a.data;return{menu:b,opts:b.data(n),raditems:function(){return b.find("."+i)}}}function m(a,
b,c,d){if(b==c)c=b-1;var e=f(a.raditems()[b]),l=a.raditems()[c];b>c?e.insertBefore(l).show():e.insertAfter(l).show();y(a,d)}function z(a,b){var c="";a.each(function(d){var e=f(this);d=p(d+1,a.length,b);c+="<div class='"+i+"' ";c+="style='position:absolute;left:"+d.x+"px;top:"+d.y+"px;'>";c+=e.html();c+="</div>"});return c}function p(a,b,c){var d=c.radius,e=c.angleOffset;b=2*Math.PI*parseFloat(a/b);a=c.centerX+Math.cos(b+e)*d;c=c.centerY+Math.sin(b+e)*d;return{x:a,y:c}}function y(a,b){var c=a.menu.find("."+
i),d=c.length;c.each(function(e){var l=f(this);e=p(e+b,d,a.opts);l.animate({left:e.x,top:e.y},a.opts.animSpeed)});a.opts.afterAnimation(a)}var o="select",u="next",v="prev",s="show",t="hide",w="shuffle",n="options",g="radmenu.",k="radial_div",i="radial_div_item",A="<div class='"+k+"'></div>",B={position:"relative"},r={listClass:"list",itemClass:"item",activeItemClass:"active",selectEvent:null,onSelect:function(){},radius:10,angleOffset:0,centerX:0,centerY:0,animSpeed:500,afterAnimation:function(){}};
f.fn.radmenu=function(a,b){try{var c=f(this),d=typeof a;if(arguments.length==0||d=="object")return q(c,a);else if(d=="string")return c.trigger(g+a,b);else if(d=="number")return c.trigger(g+o,a)}catch(e){return"error : "+e}};var h={show:function(a){a=j(a);a.menu.find("."+k).remove();var b=a.menu.find("."+a.opts.itemClass);b=f(A).css(B).html(z(b,a.opts));a.opts.selectEvent!=null&&b.find("."+i).bind(a.opts.selectEvent,x);b.appendTo(a.menu)},hide:function(a){j(a).menu.find("."+k).remove()},select:function(a,
b){a=j(a);b=f(a.raditems().get(b));b.siblings().removeClass(a.opts.activeItemClass);b.addClass(a.opts.activeItemClass);a.opts.onSelect(b)},next:function(a){a=j(a);m(a,a.raditems().length-1,0,1)},prev:function(a){a=j(a);m(a,0,a.raditems().length-1,1)},shuffle:function(a){a=j(a);var b=a.raditems().length;m(a,parseInt(Math.random()*b),parseInt(Math.random()*b),parseInt(Math.random()*15))}}})(jQuery);
