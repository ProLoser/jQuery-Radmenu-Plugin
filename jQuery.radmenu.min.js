(function(f){function r(a,c){var b=f.extend({},s,c);return a.each(function(){var d=f(this);d.find("."+b.listClass).find("."+b.itemClass).hide();d.data(l,b);for(e in o)d.bind(e+i,d,o[e])})}function t(a){var c=f(this),b=f(a.target),d=f.radmenu.container;b.hasClass(d.itemClz)||(b=b.closest("."+d.itemClz));var g=b.parents("."+d.itemClz).length>0;b=b.index();g?c.radmenu(b):c.parents("."+d.clz).radmenu(b);j(a)}function j(a){if(f.support.opacity)a.stopPropagation();else window.event.cancelBubble=true}function m(a){return parseInt(Math.random()*
a)}function h(a){var c=a.data;return{menu:c,opts:c.data(l),raditems:function(){return c.find("."+f.radmenu.container.itemClz)}}}function n(a,c,b,d){if(c==b)b=c-1;var g=f(a.raditems()[c]),k=a.raditems()[b];c>b?g.insertBefore(k):g.insertAfter(k);u(a,d)}function v(a,c){var b="";a.each(function(d){var g=f(this);d=p(d+1,a.length,c);b+="<div class='"+f.radmenu.container.itemClz+"' ";b+="style='position:absolute;left:"+d.x+"px;top:"+d.y+"px;display:none;'>";b+=g.html();b+="</div>"});return b}function p(a,
c,b){var d=b.radius,g=b.angleOffset;c=2*Math.PI*parseFloat(a/c);a=b.centerX+Math.cos(c+g)*d;b=b.centerY+Math.sin(c+g)*d;return{x:a,y:b}}function u(a,c){var b=a.menu.find("."+f.radmenu.container.itemClz),d=b.length;b.each(function(g){var k=f(this),q=p(g+c,d,a.opts);k.animate({left:q.x,top:q.y},a.opts.animSpeed,g==d-1?function(){a.opts.afterAnimation(a)}:undefined)})}var l="options",i=".radmenu",s={listClass:"list",itemClass:"item",activeItemClass:"active",selectEvent:null,onSelect:function(){},radius:10,
angleOffset:0,centerX:0,centerY:0,animSpeed:500,afterAnimation:function(){},onShow:function(a){a.show()},onHide:function(a){a.hide()}};f.radmenu={container:{clz:"radial_div",itemClz:"radial_div_item",html:"<div></div>",css:{position:"relative"}}};f.fn.radmenu=function(a,c){try{var b=f(this),d=typeof a;if(arguments.length==0||d=="object")return r(b,a);else if(d=="string")return a=="items"?b.triggerHandler(a+i):b.trigger(a+i,c||null);else if(d=="number")return b.trigger("select"+i,a)}catch(g){return"error : "+
g}};var o={show:function(a){var c=h(a),b=f.radmenu.container;c.menu.find("."+b.clz).remove();var d=c.menu.find("."+c.opts.itemClass),g=f(b.html).addClass(b.clz).css(b.css).html(v(d,c.opts));d=g.find("."+b.itemClz);c.opts.selectEvent!=null&&d.bind(c.opts.selectEvent,t);g.appendTo(c.menu);typeof fn=="function"?fn(d):c.opts.onShow(d);j(a)},hide:function(a){var c=h(a),b=c.menu.find("."+f.radmenu.container.clz);c.opts.onHide(b.find("."+f.radmenu.container.itemClz));b.remove();j(a)},select:function(a,c){var b=
h(a);c=f(b.raditems().get(c));c.siblings().removeClass(b.opts.activeItemClass);c.addClass(b.opts.activeItemClass);b.opts.onSelect(c);j(a)},next:function(a){a=h(a);n(a,a.raditems().length-1,0,1)},prev:function(a){a=h(a);n(a,0,a.raditems().length-1,1)},shuffle:function(a,c){a=h(a);var b=a.raditems().length;n(a,m(b),m(b),m(c||15))},destroy:function(a){a=h(a);a.menu.data(l,null).unbind(i);return a.menu},items:function(a){return h(a).raditems()}}})(jQuery);
