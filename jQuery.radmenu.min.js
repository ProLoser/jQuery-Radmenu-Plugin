(function(f){function p(a,b){var c=f.extend({},q,b);return a.each(function(){var d=f(this);d.find("."+c.listClass).find("."+c.itemClass).hide();d.data(m,c).bind(r,d,g.show).bind(s,d,g.hide).bind(n,d,g.select).bind(t,d,g.next).bind(u,d,g.prev).bind(v,d,g.shuffle)})}function w(a){var b=f(this);a=f(a.target);a.hasClass(h)||(a=a.parents("."+h));a=a.index();b.parents("."+j).radmenu(a)}function i(a){var b=a.data;return{menu:b,opts:b.data(m),raditems:function(){return b.find("."+h)}}}function l(a,b,c,d){if(b==
c)c=b-1;var e=f(a.raditems()[b]),k=a.raditems()[c];b>c?e.insertBefore(k).show():e.insertAfter(k).show();x(a,d)}function y(a,b){var c="";a.each(function(d){var e=f(this);d=o(d+1,a.length,b);c+="<div class='"+h+"' ";c+="style='position:absolute;left:"+d.x+"px;top:"+d.y+"px;'>";c+=e.html();c+="</div>"});return c}function o(a,b,c){var d=c.radius,e=c.angleOffset;b=2*Math.PI*parseFloat(a/b);a=c.centerX+Math.cos(b+e)*d;c=c.centerY+Math.sin(b+e)*d;return{x:a,y:c}}function x(a,b){var c=a.menu.find("."+h),
d=c.length;c.each(function(e){var k=f(this);e=o(e+b,d,a.opts);k.animate({left:e.x,top:e.y},a.opts.animSpeed)});a.opts.afterAnimation(a)}var n="select",t="next",u="prev",r="show",s="hide",v="shuffle",m="options",j="radial_div",h="radial_div_item",z="<div class='"+j+"'></div>",A={position:"relative"},q={listClass:"list",itemClass:"item",activeItemClass:"active",selectEvent:null,onSelect:function(){},radius:10,angleOffset:0,centerX:0,centerY:0,animSpeed:500,afterAnimation:function(){}};f.fn.radmenu=
function(a,b){try{var c=f(this),d=typeof a;if(arguments.length==0||d=="object")return p(c,a);else if(d=="string")return c.trigger(a,b);else if(d=="number")return c.trigger(n,a)}catch(e){return"error : "+e}};var g={show:function(a){a=i(a);a.menu.find("."+j).remove();var b=a.menu.find("."+a.opts.itemClass);b=f(z).css(A).html(y(b,a.opts));a.opts.selectEvent!=null&&b.find("."+h).bind(a.opts.selectEvent,w);b.appendTo(a.menu)},hide:function(a){i(a).menu.find("."+j).remove()},select:function(a,b){a=i(a);
b=f(a.raditems().get(b));b.siblings().removeClass(a.opts.activeItemClass);b.addClass(a.opts.activeItemClass);a.opts.onSelect(b)},next:function(a){a=i(a);l(a,a.raditems().length-1,0,1)},prev:function(a){a=i(a);l(a,0,a.raditems().length-1,1)},shuffle:function(a){a=i(a);var b=a.raditems().length;l(a,parseInt(Math.random()*b),parseInt(Math.random()*b),parseInt(Math.random()*15))}}})(jQuery);
