(function(f){function r(a,c){var b=f.extend({},s,c);return a.each(function(){var d=f(this);d.find("."+b.listClass).find("."+b.itemClass).hide();d.data(o,b).bind(g+t,d,i.show).bind(g+u,d,i.hide).bind(g+p,d,i.select).bind(g+v,d,i.next).bind(g+w,d,i.prev).bind(g+x,d,i.shuffle)})}function y(a){var c=f(this),b=f(a.target);b.hasClass(h)||(b=b.closest("."+h));var d=b.parents("."+h).length>0;b=b.index();d?c.radmenu(b):c.parents("."+k).radmenu(b);l(a)}function l(a){if(jQuery.browser.msie)a.cancelBubble=true;
else a.stopPropagation()}function j(a){var c=a.data;return{menu:c,opts:c.data(o),raditems:function(){return c.find("."+h)}}}function n(a,c,b,d){if(c==b)b=c-1;var e=f(a.raditems()[c]),m=a.raditems()[b];c>b?e.insertBefore(m).show():e.insertAfter(m).show();z(a,d)}function A(a,c){var b="";a.each(function(d){var e=f(this);d=q(d+1,a.length,c);b+="<div class='"+h+"' ";b+="style='position:absolute;left:"+d.x+"px;top:"+d.y+"px;'>";b+=e.html();b+="</div>"});return b}function q(a,c,b){var d=b.radius,e=b.angleOffset;
c=2*Math.PI*parseFloat(a/c);a=b.centerX+Math.cos(c+e)*d;b=b.centerY+Math.sin(c+e)*d;return{x:a,y:b}}function z(a,c){var b=a.menu.find("."+h),d=b.length;b.each(function(e){var m=f(this);e=q(e+c,d,a.opts);m.animate({left:e.x,top:e.y},a.opts.animSpeed)});a.opts.afterAnimation(a)}var p="select",v="next",w="prev",t="show",u="hide",x="shuffle",o="options",g="radmenu.",k="radial_div",h="radial_div_item",B="<div class='"+k+"'></div>",C={position:"relative"},s={listClass:"list",itemClass:"item",activeItemClass:"active",
selectEvent:null,onSelect:function(){},radius:10,angleOffset:0,centerX:0,centerY:0,animSpeed:500,afterAnimation:function(){}};f.fn.radmenu=function(a,c){try{var b=f(this),d=typeof a;if(arguments.length==0||d=="object")return r(b,a);else if(d=="string")return b.trigger(g+a,c);else if(d=="number")return b.trigger(g+p,a)}catch(e){return"error : "+e}};var i={show:function(a){var c=j(a);c.menu.find("."+k).remove();var b=c.menu.find("."+c.opts.itemClass);b=f(B).css(C).html(A(b,c.opts));c.opts.selectEvent!=
null&&b.find("."+h).bind(c.opts.selectEvent,y);b.appendTo(c.menu);l(a)},hide:function(a){j(a).menu.find("."+k).remove();l(a)},select:function(a,c){var b=j(a);c=f(b.raditems().get(c));c.siblings().removeClass(b.opts.activeItemClass);c.addClass(b.opts.activeItemClass);b.opts.onSelect(c);l(a)},next:function(a){a=j(a);n(a,a.raditems().length-1,0,1)},prev:function(a){a=j(a);n(a,0,a.raditems().length-1,1)},shuffle:function(a){a=j(a);var c=a.raditems().length;n(a,parseInt(Math.random()*c),parseInt(Math.random()*
c),parseInt(Math.random()*15))}}})(jQuery);
